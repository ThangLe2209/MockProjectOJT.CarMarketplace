2025-08-13 09:36:34.625 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 09:36:34.695 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 09:36:34.701 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 09:38:55.111 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 09:38:55.202 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 09:38:55.203 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 09:38:58.628 +07:00 [INF] Executed DbCommand (1,162ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [OrderServiceDB];
2025-08-13 09:38:59.246 +07:00 [INF] Executed DbCommand (612ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [OrderServiceDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-08-13 09:38:59.298 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:38:59.301 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-13 09:38:59.325 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-13 09:38:59.511 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-13 09:38:59.517 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:38:59.518 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-13 09:38:59.544 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-13 09:38:59.553 +07:00 [INF] Applying migration '20250813023636_InitialMigration'.
2025-08-13 09:38:59.575 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Orders] (
    [Id] int NOT NULL IDENTITY,
    [BuyerId] int NOT NULL,
    [TotalPrice] decimal(18,2) NOT NULL,
    [IsDeleted] bit NOT NULL,
    [Status] nvarchar(max) NOT NULL,
    [CreatedDate] datetime2 NOT NULL,
    [UpdatedDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Orders] PRIMARY KEY ([Id])
);
2025-08-13 09:38:59.578 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProcessedEvent] (
    [Id] uniqueidentifier NOT NULL,
    [EventType] nvarchar(max) NOT NULL,
    [Payload] nvarchar(max) NOT NULL,
    [ProcessedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ProcessedEvent] PRIMARY KEY ([Id])
);
2025-08-13 09:38:59.580 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderItems] (
    [Id] int NOT NULL IDENTITY,
    [OrderId] int NOT NULL,
    [CarId] int NOT NULL,
    [Quantity] int NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    CONSTRAINT [PK_OrderItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderItems_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([Id]) ON DELETE CASCADE
);
2025-08-13 09:38:59.737 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderItems_OrderId] ON [OrderItems] ([OrderId]);
2025-08-13 09:38:59.767 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250813023636_InitialMigration', N'9.0.4');
2025-08-13 09:38:59.773 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-13 09:41:02.699 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:41:02.932 +07:00 [INF] Now listening on: https://localhost:7096
2025-08-13 09:41:02.935 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 09:41:02.939 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:41:02.941 +07:00 [INF] Hosting environment: Development
2025-08-13 09:41:02.942 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 09:41:06.427 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger - null null
2025-08-13 09:41:11.275 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger - 301 0 null 4849.7527ms
2025-08-13 09:41:11.524 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-08-13 09:41:11.899 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 374.7881ms
2025-08-13 09:41:11.907 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/swagger-ui.css - null null
2025-08-13 09:41:11.907 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/swagger-ui-standalone-preset.js - null null
2025-08-13 09:41:11.908 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/swagger-ui-bundle.js - null null
2025-08-13 09:41:11.908 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-08-13 09:41:11.919 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-08-13 09:41:11.932 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 13777 application/javascript; charset=utf-8 24.5757ms
2025-08-13 09:41:11.975 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-08-13 09:41:11.975 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-08-13 09:41:11.977 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/swagger-ui.css - 200 143943 text/css 69.9562ms
2025-08-13 09:41:11.979 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 71.9729ms
2025-08-13 09:41:12.162 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 243.3341ms
2025-08-13 09:41:12.270 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-08-13 09:41:12.274 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 366.3179ms
2025-08-13 09:41:12.595 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-08-13 09:41:12.644 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/favicon-32x32.png - null null
2025-08-13 09:41:12.650 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-08-13 09:41:12.652 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/favicon-32x32.png - 200 628 image/png 8.5469ms
2025-08-13 09:41:13.013 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 417.5853ms
2025-08-13 09:41:19.697 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 09:41:19.710 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 09:41:19.738 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 09:41:20.920 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 09:41:20.974 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 09:41:20.980 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 09:41:22.025 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 09:41:22.087 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 09:41:22.089 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 09:41:22.352 +07:00 [INF] Executed DbCommand (153ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 09:41:22.385 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 09:41:22.407 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 2661.9149ms
2025-08-13 09:41:22.410 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 09:41:22.420 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 2723.1105ms
2025-08-13 09:45:17.311 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:45:17.590 +07:00 [INF] Now listening on: https://localhost:7096
2025-08-13 09:45:17.596 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 09:45:17.605 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:45:17.609 +07:00 [INF] Hosting environment: Development
2025-08-13 09:45:17.614 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 09:45:21.771 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-08-13 09:45:26.940 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 5290.7829ms
2025-08-13 09:45:27.941 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-08-13 09:45:27.941 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-08-13 09:45:27.973 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 13777 application/javascript; charset=utf-8 32.443ms
2025-08-13 09:45:28.044 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 103.3683ms
2025-08-13 09:45:28.259 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-08-13 09:45:29.044 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 785.5095ms
2025-08-13 09:45:37.291 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/Orders - application/json 126
2025-08-13 09:45:37.309 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 09:45:37.360 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 09:45:45.451 +07:00 [INF] Creating order with BuyerId 0
2025-08-13 09:45:45.515 +07:00 [WRN] Validation failed for order creation: Must have buyer.; CarId must be greater than 0.; Quantity must be greater than 0.; Price must be greater than 0.
2025-08-13 09:45:47.264 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 9892.0788ms
2025-08-13 09:45:47.271 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 09:45:47.279 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Must have buyer.; CarId must be greater than 0.; Quantity must be greater than 0.; Price must be greater than 0.
   at OrderApi.Application.CQRS.Car.Handler.CreateOrderHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Application\CQRS\Order\Handler\CreateOrderHandler.cs:line 24
   at OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync(OrderInputDto order) in D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation\Controllers\OrdersController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-13 09:46:00.318 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/Orders - 500 null application/json 23027.2399ms
2025-08-13 09:46:13.322 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/Orders - application/json 126
2025-08-13 09:46:13.331 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 09:46:13.334 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 09:46:13.348 +07:00 [INF] Creating order with BuyerId 0
2025-08-13 09:46:13.355 +07:00 [WRN] Validation failed for order creation: Must have buyer.; CarId must be greater than 0.; Quantity must be greater than 0.; Price must be greater than 0.
2025-08-13 09:46:13.417 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 77.5426ms
2025-08-13 09:46:13.425 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 09:46:13.428 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Must have buyer.; CarId must be greater than 0.; Quantity must be greater than 0.; Price must be greater than 0.
   at OrderApi.Application.CQRS.Car.Handler.CreateOrderHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Application\CQRS\Order\Handler\CreateOrderHandler.cs:line 24
   at OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync(OrderInputDto order) in D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation\Controllers\OrdersController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-13 09:46:13.435 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/Orders - 500 null application/json 113.9693ms
2025-08-13 09:49:44.638 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:49:44.869 +07:00 [INF] Now listening on: https://localhost:7096
2025-08-13 09:49:44.875 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 09:49:44.882 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:49:44.887 +07:00 [INF] Hosting environment: Development
2025-08-13 09:49:44.891 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 09:49:46.574 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-08-13 09:49:50.442 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 3880.4601ms
2025-08-13 09:49:50.917 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-08-13 09:49:50.917 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-08-13 09:49:50.944 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 13777 application/javascript; charset=utf-8 27.4175ms
2025-08-13 09:49:51.140 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 223.6328ms
2025-08-13 09:49:51.316 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-08-13 09:49:52.261 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 945.9053ms
2025-08-13 09:50:49.936 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/Orders - application/json 199
2025-08-13 09:50:49.951 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 09:50:49.996 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 09:50:50.698 +07:00 [INF] Creating order with BuyerId 1
2025-08-13 09:50:51.338 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 09:50:51.399 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 09:50:51.407 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 09:50:53.115 +07:00 [INF] Executed DbCommand (252ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BuyerId], [CreatedDate], [IsDeleted], [Status], [TotalPrice], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 09:50:53.289 +07:00 [INF] Executed DbCommand (128ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, 1)) AS i ([CarId], [OrderId], [Price], [Quantity], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CarId], [OrderId], [Price], [Quantity])
VALUES (i.[CarId], i.[OrderId], i.[Price], i.[Quantity])
OUTPUT INSERTED.[Id], i._Position;
2025-08-13 09:50:53.321 +07:00 [INF] Order created successfully with ID 1
2025-08-13 09:50:53.355 +07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 09:50:53.410 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 3402.6813ms
2025-08-13 09:50:53.418 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 09:50:53.429 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/Orders - 201 null application/json; charset=utf-8 3494.0125ms
2025-08-13 09:51:34.618 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 09:51:34.628 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 09:51:34.642 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 09:51:35.251 +07:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 09:51:35.313 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 09:51:35.321 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 09:51:35.509 +07:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 09:51:35.575 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 09:51:35.585 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 935.5664ms
2025-08-13 09:51:35.590 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 09:51:35.596 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 978.398ms
2025-08-13 09:52:31.057 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders/getByBuyerId/1 - null null
2025-08-13 09:52:31.075 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 09:52:31.084 +07:00 [INF] Route matched with {action = "GetOrdersByBuyerId", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrdersByBuyerIdAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 09:52:31.261 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__request_BuyerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM [Orders] AS [o]
LEFT JOIN [OrderItems] AS [o0] ON [o].[Id] = [o0].[OrderId]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[BuyerId] = @__request_BuyerId_0
ORDER BY [o].[Id]
2025-08-13 09:52:31.271 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 09:52:31.276 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation) in 187.1846ms
2025-08-13 09:52:31.287 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 09:52:31.290 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders/getByBuyerId/1 - 200 null application/json; charset=utf-8 232.5988ms
2025-08-13 09:52:51.458 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders/1 - null null
2025-08-13 09:52:51.476 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation)'
2025-08-13 09:52:51.486 +07:00 [INF] Route matched with {action = "GetOrderById", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderByIdAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 09:52:51.495 +07:00 [INF] Fetching order with ID 1
2025-08-13 09:52:51.632 +07:00 [INF] Executed DbCommand (115ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__request_Id_0
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 09:52:51.642 +07:00 [INF] Successfully fetched order with ID 1
2025-08-13 09:52:51.646 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 09:52:51.649 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation) in 155.9026ms
2025-08-13 09:52:51.653 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation)'
2025-08-13 09:52:51.657 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders/1 - 200 null application/json; charset=utf-8 199.8666ms
2025-08-13 10:08:04.134 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:08:04.886 +07:00 [INF] Now listening on: https://localhost:7096
2025-08-13 10:08:04.900 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 10:08:04.911 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:08:04.930 +07:00 [INF] Hosting environment: Development
2025-08-13 10:08:04.940 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 10:08:07.395 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-08-13 10:08:10.075 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 2804.0369ms
2025-08-13 10:08:10.413 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-08-13 10:08:10.413 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-08-13 10:08:10.428 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 13777 application/javascript; charset=utf-8 14.724ms
2025-08-13 10:08:10.513 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 99.9089ms
2025-08-13 10:08:10.767 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-08-13 10:08:11.252 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 485.7892ms
2025-08-13 10:08:20.896 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 10:08:20.923 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:08:20.979 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:08:25.380 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 10:08:25.484 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 10:08:25.490 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 10:08:31.821 +07:00 [INF] Executed DbCommand (394ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 10:08:32.098 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 10:08:32.136 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 10:08:33.094 +07:00 [INF] Executed DbCommand (119ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 10:08:33.284 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 10:08:33.332 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 12341.024ms
2025-08-13 10:08:33.339 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:08:33.354 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 12458.1879ms
2025-08-13 10:08:55.298 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7096/api/Orders/1?status=Completed - null 0
2025-08-13 10:08:55.309 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.UpdateOrderStatusAsync (OrderApi.Presentation)'
2025-08-13 10:08:55.319 +07:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatusAsync(Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:08:55.336 +07:00 [INF] Update order status with OrderId 1
2025-08-13 10:08:55.476 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__p_0
2025-08-13 10:08:55.486 +07:00 [INF] Order status updated successfully with ID 1
2025-08-13 10:08:55.498 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-13 10:08:55.501 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.UpdateOrderStatusAsync (OrderApi.Presentation) in 174.9473ms
2025-08-13 10:08:55.507 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.UpdateOrderStatusAsync (OrderApi.Presentation)'
2025-08-13 10:08:55.512 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7096/api/Orders/1?status=Completed - 204 null null 213.7853ms
2025-08-13 10:09:02.156 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 10:09:02.179 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:09:02.183 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:09:02.208 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 10:09:02.263 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 10:09:02.271 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 10:09:02.277 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 89.734ms
2025-08-13 10:09:02.282 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:09:02.286 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 130.6963ms
2025-08-13 10:09:06.077 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 10:09:06.086 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:09:06.093 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:09:06.109 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 10:09:06.157 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 10:09:06.165 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 10:09:06.169 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 67.4472ms
2025-08-13 10:09:06.173 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:09:06.179 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 102.0858ms
2025-08-13 10:09:56.836 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:09:57.124 +07:00 [INF] Now listening on: https://localhost:7096
2025-08-13 10:09:57.128 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 10:09:57.135 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:09:57.140 +07:00 [INF] Hosting environment: Development
2025-08-13 10:09:57.144 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 10:09:58.573 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-08-13 10:09:59.225 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 668.7864ms
2025-08-13 10:09:59.437 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-08-13 10:09:59.437 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-08-13 10:09:59.464 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 13777 application/javascript; charset=utf-8 27.3554ms
2025-08-13 10:09:59.534 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.7589ms
2025-08-13 10:09:59.710 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-08-13 10:09:59.994 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 284.273ms
2025-08-13 10:10:15.895 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7096/api/Orders/1?status=Completed - null 0
2025-08-13 10:10:15.911 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.UpdateOrderStatusAsync (OrderApi.Presentation)'
2025-08-13 10:10:15.947 +07:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatusAsync(Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:10:16.152 +07:00 [INF] Update order status with OrderId 1
2025-08-13 10:10:16.796 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 10:10:16.886 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 10:10:16.892 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 10:10:18.399 +07:00 [INF] Executed DbCommand (91ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__p_0
2025-08-13 10:10:18.887 +07:00 [INF] Executed DbCommand (100ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [Status] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-08-13 10:10:18.909 +07:00 [INF] Order status updated successfully with ID 1
2025-08-13 10:10:18.925 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-13 10:10:18.938 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.UpdateOrderStatusAsync (OrderApi.Presentation) in 2976.2982ms
2025-08-13 10:10:18.944 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.UpdateOrderStatusAsync (OrderApi.Presentation)'
2025-08-13 10:10:18.970 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7096/api/Orders/1?status=Completed - 204 null null 3074.8133ms
2025-08-13 10:10:31.838 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 10:10:31.848 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:10:31.861 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:10:32.072 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 10:10:32.105 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 10:10:32.111 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 10:10:32.194 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 10:10:32.251 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 10:10:32.278 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 412.0978ms
2025-08-13 10:10:32.284 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:10:32.288 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 450.3595ms
2025-08-13 10:11:19.939 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/Orders - application/json 129
2025-08-13 10:11:19.960 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 10:11:19.971 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:11:20.321 +07:00 [INF] Creating order with BuyerId 1
2025-08-13 10:11:20.867 +07:00 [INF] Executed DbCommand (400ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BuyerId], [CreatedDate], [IsDeleted], [Status], [TotalPrice], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 10:11:21.209 +07:00 [INF] Executed DbCommand (181ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CarId], [OrderId], [Price], [Quantity])
OUTPUT INSERTED.[Id]
VALUES (@p6, @p7, @p8, @p9);
2025-08-13 10:11:21.330 +07:00 [INF] Order created successfully with ID 2
2025-08-13 10:11:21.340 +07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 10:11:21.369 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 1392.4706ms
2025-08-13 10:11:21.374 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 10:11:21.379 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/Orders - 201 null application/json; charset=utf-8 1439.5573ms
2025-08-13 10:11:46.208 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/Orders - application/json 129
2025-08-13 10:11:46.230 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 10:11:46.236 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:11:46.244 +07:00 [INF] Creating order with BuyerId 2
2025-08-13 10:11:46.257 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BuyerId], [CreatedDate], [IsDeleted], [Status], [TotalPrice], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 10:11:46.263 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CarId], [OrderId], [Price], [Quantity])
OUTPUT INSERTED.[Id]
VALUES (@p6, @p7, @p8, @p9);
2025-08-13 10:11:46.268 +07:00 [INF] Order created successfully with ID 3
2025-08-13 10:11:46.272 +07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 10:11:46.276 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 33.9599ms
2025-08-13 10:11:46.280 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 10:11:46.283 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/Orders - 201 null application/json; charset=utf-8 75.9434ms
2025-08-13 10:12:04.683 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders/getByBuyerId/1 - null null
2025-08-13 10:12:04.691 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 10:12:04.699 +07:00 [INF] Route matched with {action = "GetOrdersByBuyerId", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrdersByBuyerIdAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:12:04.870 +07:00 [INF] Executed DbCommand (73ms) [Parameters=[@__request_BuyerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM [Orders] AS [o]
LEFT JOIN [OrderItems] AS [o0] ON [o].[Id] = [o0].[OrderId]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[BuyerId] = @__request_BuyerId_0
ORDER BY [o].[Id]
2025-08-13 10:12:04.881 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 10:12:04.886 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation) in 181.964ms
2025-08-13 10:12:04.889 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 10:12:04.893 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders/getByBuyerId/1 - 200 null application/json; charset=utf-8 211.3087ms
2025-08-13 10:12:45.012 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders/getByBuyerId/2 - null null
2025-08-13 10:12:45.032 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 10:12:45.035 +07:00 [INF] Route matched with {action = "GetOrdersByBuyerId", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrdersByBuyerIdAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:12:45.065 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_BuyerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM [Orders] AS [o]
LEFT JOIN [OrderItems] AS [o0] ON [o].[Id] = [o0].[OrderId]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[BuyerId] = @__request_BuyerId_0
ORDER BY [o].[Id]
2025-08-13 10:12:45.070 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 10:12:45.073 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation) in 33.6204ms
2025-08-13 10:12:45.078 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 10:12:45.082 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders/getByBuyerId/2 - 200 null application/json; charset=utf-8 69.8175ms
2025-08-13 10:13:05.423 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders/getByBuyerId/1 - null null
2025-08-13 10:13:05.440 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 10:13:05.443 +07:00 [INF] Route matched with {action = "GetOrdersByBuyerId", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrdersByBuyerIdAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:13:05.454 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BuyerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM [Orders] AS [o]
LEFT JOIN [OrderItems] AS [o0] ON [o].[Id] = [o0].[OrderId]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[BuyerId] = @__request_BuyerId_0
ORDER BY [o].[Id]
2025-08-13 10:13:05.458 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 10:13:05.462 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation) in 15.168ms
2025-08-13 10:13:05.467 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 10:13:05.471 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders/getByBuyerId/1 - 200 null application/json; charset=utf-8 48.1271ms
2025-08-13 10:34:40.359 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:34:40.771 +07:00 [INF] Now listening on: https://localhost:7096
2025-08-13 10:34:40.778 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 10:34:40.789 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:34:40.797 +07:00 [INF] Hosting environment: Development
2025-08-13 10:34:40.804 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 10:34:43.370 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-08-13 10:34:45.722 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 2372.8933ms
2025-08-13 10:34:45.753 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-08-13 10:34:45.750 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-08-13 10:34:45.807 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 13777 application/javascript; charset=utf-8 58.3963ms
2025-08-13 10:34:45.916 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 165.9724ms
2025-08-13 10:34:46.123 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-08-13 10:34:46.440 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 317.2433ms
2025-08-13 10:35:00.167 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders/1 - null null
2025-08-13 10:35:00.188 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation)'
2025-08-13 10:35:00.234 +07:00 [INF] Route matched with {action = "GetOrderById", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderByIdAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:35:00.259 +07:00 [INF] Fetching order with ID 1
2025-08-13 10:35:03.241 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 10:35:03.350 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 10:35:03.366 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 10:35:06.923 +07:00 [INF] Executed DbCommand (275ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__request_Id_0
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 10:35:07.017 +07:00 [INF] Successfully fetched order with ID 1
2025-08-13 10:35:07.046 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 10:35:07.107 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation) in 6860.5126ms
2025-08-13 10:35:07.118 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation)'
2025-08-13 10:35:07.142 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders/1 - 200 null application/json; charset=utf-8 6974.6999ms
2025-08-13 10:35:19.492 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 10:35:19.516 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:35:19.528 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:35:19.761 +07:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 10:35:19.781 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 10:35:19.786 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 10:35:19.853 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 10:35:19.979 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 10:35:19.989 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 455.851ms
2025-08-13 10:35:19.996 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:35:20.003 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 510.7767ms
2025-08-13 10:35:33.916 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7096/api/Orders/soft/3 - null null
2025-08-13 10:35:33.927 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.DeleteOrderAsync (OrderApi.Presentation)'
2025-08-13 10:35:33.936 +07:00 [INF] Route matched with {action = "DeleteOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeleteOrderAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:35:33.989 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__p_0
2025-08-13 10:35:34.207 +07:00 [INF] Executed DbCommand (58ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [IsDeleted] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-08-13 10:35:34.242 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-13 10:35:34.247 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.DeleteOrderAsync (OrderApi.Presentation) in 305.2102ms
2025-08-13 10:35:34.253 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.DeleteOrderAsync (OrderApi.Presentation)'
2025-08-13 10:35:34.256 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7096/api/Orders/soft/3 - 204 null null 340.462ms
2025-08-13 10:35:39.456 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7096/api/Orders/soft/1 - null null
2025-08-13 10:35:39.466 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.DeleteOrderAsync (OrderApi.Presentation)'
2025-08-13 10:35:39.474 +07:00 [INF] Route matched with {action = "DeleteOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeleteOrderAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:35:39.490 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__p_0
2025-08-13 10:35:39.501 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [IsDeleted] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-08-13 10:35:39.507 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-13 10:35:39.511 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.DeleteOrderAsync (OrderApi.Presentation) in 32.1429ms
2025-08-13 10:35:39.517 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.DeleteOrderAsync (OrderApi.Presentation)'
2025-08-13 10:35:39.521 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7096/api/Orders/soft/1 - 204 null null 64.6828ms
2025-08-13 10:35:46.237 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 10:35:46.260 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:35:46.272 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 10:35:46.291 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 10:35:46.311 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 10:35:46.321 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 10:35:46.328 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 48.0159ms
2025-08-13 10:35:46.335 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 10:35:46.341 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7096/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 104.0984ms
2025-08-13 11:11:32.906 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 11:11:33.042 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 11:11:33.048 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 11:11:33.051 +07:00 [INF] Hosting environment: Development
2025-08-13 11:11:33.054 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 11:13:52.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/ - null null
2025-08-13 11:13:52.442 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/ - 404 0 null 228.3402ms
2025-08-13 11:13:52.492 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5030/, Response status code: 404
2025-08-13 11:13:58.419 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/swagger - null null
2025-08-13 11:13:58.437 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/swagger - 301 0 null 17.3992ms
2025-08-13 11:13:58.450 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/swagger/index.html - null null
2025-08-13 11:13:58.660 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/swagger/index.html - 200 null text/html;charset=utf-8 210.1708ms
2025-08-13 11:13:58.697 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/swagger/swagger-ui.css - null null
2025-08-13 11:13:58.699 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/swagger/swagger-ui-bundle.js - null null
2025-08-13 11:13:58.700 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/swagger/swagger-ui-standalone-preset.js - null null
2025-08-13 11:13:58.802 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-08-13 11:13:58.809 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-08-13 11:13:58.812 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/swagger/swagger-ui.css - 200 143943 text/css 115.0036ms
2025-08-13 11:13:58.813 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 112.7126ms
2025-08-13 11:13:58.826 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-08-13 11:13:58.834 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 135.2134ms
2025-08-13 11:13:59.314 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/swagger/v1/swagger.json - null null
2025-08-13 11:13:59.346 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/swagger/favicon-32x32.png - null null
2025-08-13 11:13:59.358 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-08-13 11:13:59.366 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/swagger/favicon-32x32.png - 200 628 image/png 20.1069ms
2025-08-13 11:13:59.539 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 224.8116ms
2025-08-13 11:14:11.862 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/api/Orders/1 - null null
2025-08-13 11:14:11.870 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation)'
2025-08-13 11:14:11.899 +07:00 [INF] Route matched with {action = "GetOrderById", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderByIdAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 11:14:11.910 +07:00 [INF] Fetching order with ID 1
2025-08-13 11:14:13.224 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 11:14:13.297 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 11:14:13.300 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 11:14:26.225 +07:00 [INF] Executed DbCommand (129ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__request_Id_0
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 11:14:26.283 +07:00 [INF] Successfully fetched order with ID 1
2025-08-13 11:14:26.296 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 11:14:26.333 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation) in 14425.8372ms
2025-08-13 11:14:26.336 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation)'
2025-08-13 11:14:26.345 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/api/Orders/1 - 200 null application/json; charset=utf-8 14482.8542ms
2025-08-13 11:14:41.105 +07:00 [INF] Application is shutting down...
2025-08-13 11:15:56.626 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 11:15:56.785 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 11:15:56.794 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 11:15:56.797 +07:00 [INF] Hosting environment: Development
2025-08-13 11:15:56.800 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 11:16:02.578 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/api/Orders/1 - null null
2025-08-13 11:16:02.654 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation)'
2025-08-13 11:16:02.688 +07:00 [INF] Route matched with {action = "GetOrderById", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderByIdAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 11:16:02.701 +07:00 [INF] Fetching order with ID 1
2025-08-13 11:16:03.510 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 11:16:03.584 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 11:16:03.588 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 11:16:04.566 +07:00 [INF] Executed DbCommand (46ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__request_Id_0
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 11:16:04.629 +07:00 [INF] Successfully fetched order with ID 1
2025-08-13 11:16:04.667 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 11:16:04.807 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation) in 2107.4206ms
2025-08-13 11:16:04.813 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrderByIdAsync (OrderApi.Presentation)'
2025-08-13 11:16:04.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/api/Orders/1 - 200 null application/json; charset=utf-8 2267.4558ms
2025-08-13 11:16:16.502 +07:00 [INF] Application is shutting down...
2025-08-13 15:50:56.660 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 15:50:56.973 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 15:50:56.980 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 15:50:57.028 +07:00 [INF] Hosting environment: Development
2025-08-13 15:50:57.031 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 15:51:07.188 +07:00 [INF] Application is shutting down...
2025-08-13 15:51:22.117 +07:00 [INF] User profile is available. Using 'C:\Users\thang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 15:51:22.237 +07:00 [INF] Now listening on: http://localhost:5030
2025-08-13 15:51:22.243 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 15:51:22.247 +07:00 [INF] Hosting environment: Development
2025-08-13 15:51:22.249 +07:00 [INF] Content root path: D:\microservice\MockFinal\CarMarketplace.OrderApiSolution\OrderApi.Presentation
2025-08-13 15:51:57.379 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/swagger/index.html - null null
2025-08-13 15:51:57.648 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/swagger/index.html - 200 null text/html;charset=utf-8 271.0366ms
2025-08-13 15:51:58.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/swagger/v1/swagger.json - null null
2025-08-13 15:51:58.226 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 149.8335ms
2025-08-13 15:59:12.260 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5030/api/orders - application/json 120
2025-08-13 15:59:19.913 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 15:59:19.955 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 15:59:20.993 +07:00 [INF] Creating order with BuyerId 1
2025-08-13 15:59:21.739 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-08-13 15:59:21.846 +07:00 [WRN] No store type was specified for the decimal property 'TotalPrice' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 15:59:21.850 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-08-13 15:59:24.413 +07:00 [INF] Executed DbCommand (861ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BuyerId], [CreatedDate], [IsDeleted], [Status], [TotalPrice], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 15:59:24.778 +07:00 [INF] Executed DbCommand (250ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, 1)) AS i ([CarId], [OrderId], [Price], [Quantity], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CarId], [OrderId], [Price], [Quantity])
VALUES (i.[CarId], i.[OrderId], i.[Price], i.[Quantity])
OUTPUT INSERTED.[Id], i._Position;
2025-08-13 15:59:24.848 +07:00 [INF] Order created successfully with ID 4
2025-08-13 15:59:24.868 +07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 15:59:24.940 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 4973.1514ms
2025-08-13 15:59:24.943 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 15:59:24.958 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5030/api/orders - 201 null application/json; charset=utf-8 12698.1698ms
2025-08-13 16:01:03.488 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 16:01:03.503 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 16:01:03.512 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 16:01:04.144 +07:00 [INF] Executed DbCommand (146ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 16:01:04.179 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 16:01:04.183 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-13 16:01:04.483 +07:00 [INF] Executed DbCommand (211ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 16:01:04.556 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 16:01:04.563 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 1047.0864ms
2025-08-13 16:01:04.566 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 16:01:04.570 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 1082.0352ms
2025-08-13 16:11:59.209 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5030/api/orders - application/json 120
2025-08-13 16:11:59.217 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/13/2025 9:06:06 AM', Current time (UTC): '8/13/2025 9:11:59 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-13 16:11:59.231 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/13/2025 9:06:06 AM', Current time (UTC): '8/13/2025 9:11:59 AM'.
2025-08-13 16:11:59.233 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 16:11:59.235 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 16:11:59.242 +07:00 [INF] Creating order with BuyerId 1
2025-08-13 16:11:59.273 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BuyerId], [CreatedDate], [IsDeleted], [Status], [TotalPrice], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 16:11:59.294 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, 1)) AS i ([CarId], [OrderId], [Price], [Quantity], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CarId], [OrderId], [Price], [Quantity])
VALUES (i.[CarId], i.[OrderId], i.[Price], i.[Quantity])
OUTPUT INSERTED.[Id], i._Position;
2025-08-13 16:11:59.301 +07:00 [INF] Order created successfully with ID 5
2025-08-13 16:11:59.303 +07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 16:11:59.305 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 67.8563ms
2025-08-13 16:11:59.307 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 16:11:59.309 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5030/api/orders - 201 null application/json; charset=utf-8 99.9706ms
2025-08-13 16:23:24.011 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5030/api/orders - application/json 81
2025-08-13 16:23:25.439 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/13/2025 9:06:06 AM', Current time (UTC): '8/13/2025 9:23:25 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-13 16:23:27.139 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/13/2025 9:06:06 AM', Current time (UTC): '8/13/2025 9:23:25 AM'.
2025-08-13 16:23:27.144 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 16:23:27.149 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 16:23:28.225 +07:00 [INF] Creating order with BuyerId 1
2025-08-13 16:23:31.051 +07:00 [INF] Executed DbCommand (226ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BuyerId], [CreatedDate], [IsDeleted], [Status], [TotalPrice], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 16:23:31.475 +07:00 [INF] Executed DbCommand (418ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CarId], [OrderId], [Price], [Quantity])
OUTPUT INSERTED.[Id]
VALUES (@p6, @p7, @p8, @p9);
2025-08-13 16:23:31.482 +07:00 [INF] Order created successfully with ID 6
2025-08-13 16:23:31.484 +07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 16:23:31.490 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 4338.0871ms
2025-08-13 16:23:31.493 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 16:23:31.497 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5030/api/orders - 201 null application/json; charset=utf-8 7729.2285ms
2025-08-13 16:25:38.217 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5030/api/orders - application/json 81
2025-08-13 16:25:38.286 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/13/2025 9:06:06 AM', Current time (UTC): '8/13/2025 9:25:38 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-13 16:25:38.292 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/13/2025 9:06:06 AM', Current time (UTC): '8/13/2025 9:25:38 AM'.
2025-08-13 16:25:38.294 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 16:25:38.297 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 16:25:38.302 +07:00 [INF] Creating order with BuyerId 1
2025-08-13 16:25:38.647 +07:00 [INF] Executed DbCommand (339ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BuyerId], [CreatedDate], [IsDeleted], [Status], [TotalPrice], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 16:25:38.658 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CarId], [OrderId], [Price], [Quantity])
OUTPUT INSERTED.[Id]
VALUES (@p6, @p7, @p8, @p9);
2025-08-13 16:25:38.665 +07:00 [INF] Order created successfully with ID 7
2025-08-13 16:25:38.667 +07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 16:25:38.671 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 370.2875ms
2025-08-13 16:25:38.674 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 16:25:38.677 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5030/api/orders - 201 null application/json; charset=utf-8 460.4482ms
2025-08-13 16:26:36.035 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5030/api/orders - application/json 81
2025-08-13 16:26:36.042 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/13/2025 9:06:06 AM', Current time (UTC): '8/13/2025 9:26:36 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-13 16:26:36.045 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/13/2025 9:06:06 AM', Current time (UTC): '8/13/2025 9:26:36 AM'.
2025-08-13 16:26:36.046 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 16:26:36.049 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrderAsync(OrderApi.Application.DTOs.OrderInputDto) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 16:26:36.084 +07:00 [INF] Creating order with BuyerId 1
2025-08-13 16:26:36.093 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BuyerId], [CreatedDate], [IsDeleted], [Status], [TotalPrice], [UpdatedDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 16:26:36.101 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CarId], [OrderId], [Price], [Quantity])
OUTPUT INSERTED.[Id]
VALUES (@p6, @p7, @p8, @p9);
2025-08-13 16:26:36.105 +07:00 [INF] Order created successfully with ID 8
2025-08-13 16:26:36.106 +07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-13 16:26:36.109 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation) in 58.4691ms
2025-08-13 16:26:36.117 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.CreateOrderAsync (OrderApi.Presentation)'
2025-08-13 16:26:36.120 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5030/api/orders - 201 null application/json; charset=utf-8 84.3804ms
2025-08-13 16:55:51.521 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/api/Orders/getByBuyerId/1 - null null
2025-08-13 16:55:51.963 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 16:55:52.660 +07:00 [INF] Route matched with {action = "GetOrdersByBuyerId", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrdersByBuyerIdAsync(Int32) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 16:55:53.938 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[@__request_BuyerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM [Orders] AS [o]
LEFT JOIN [OrderItems] AS [o0] ON [o].[Id] = [o0].[OrderId]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[BuyerId] = @__request_BuyerId_0
ORDER BY [o].[Id]
2025-08-13 16:55:53.972 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 16:55:53.999 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation) in 1331.6292ms
2025-08-13 16:55:54.002 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrdersByBuyerIdAsync (OrderApi.Presentation)'
2025-08-13 16:55:54.005 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/api/Orders/getByBuyerId/1 - 200 null application/json; charset=utf-8 2483.8873ms
2025-08-13 16:57:29.766 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5030/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - null null
2025-08-13 16:57:29.772 +07:00 [INF] Executing endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 16:57:29.775 +07:00 [INF] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[OrderApi.Application.DTOs.OrderDto]]] GetOrders(System.String, Int32, Int32, System.String) on controller OrderApi.Presentation.Controllers.OrdersController (OrderApi.Presentation).
2025-08-13 16:57:30.018 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
2025-08-13 16:57:30.097 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[BuyerId], [o1].[CreatedDate], [o1].[IsDeleted], [o1].[Status], [o1].[TotalPrice], [o1].[UpdatedDate], [o0].[Id], [o0].[CarId], [o0].[OrderId], [o0].[Price], [o0].[Quantity]
FROM (
    SELECT [o].[Id], [o].[BuyerId], [o].[CreatedDate], [o].[IsDeleted], [o].[Status], [o].[TotalPrice], [o].[UpdatedDate]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o1]
LEFT JOIN [OrderItems] AS [o0] ON [o1].[Id] = [o0].[OrderId]
ORDER BY [o1].[Id]
2025-08-13 16:57:30.166 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderApi.Application.DTOs.SuccessResponse`1[[System.Collections.Generic.IEnumerable`1[[OrderApi.Application.DTOs.OrderDto, OrderApi.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-13 16:57:30.170 +07:00 [INF] Executed action OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation) in 392.9749ms
2025-08-13 16:57:30.172 +07:00 [INF] Executed endpoint 'OrderApi.Presentation.Controllers.OrdersController.GetOrders (OrderApi.Presentation)'
2025-08-13 16:57:30.173 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5030/api/Orders?pageNumber=1&pageSize=10&sort=year_asc - 200 null application/json; charset=utf-8 407.3326ms
